<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Najeed's Car & Bike Info Website</title>
<style>
  body {
    margin: 0; padding: 0;
    font-family: 'Georgia', serif;
    background: url('https://images.pexels.com/photos/919073/pexels-photo-919073.jpeg') no-repeat center center fixed;
    background-size: cover;
    color: #f2f2f2;
  }
  body::before {
    content: '';
    position: fixed; top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: -1;
  }
  header {
    position: fixed; top: 0; left: 0;
    width: 100%;
    height: 70px;
    background: rgba(0,0,0,0.7);
    display: flex;
    align-items: center;
    padding: 0 20px;
    box-sizing: border-box;
    z-index: 10000;
  }
  nav {
    display: flex;
    gap: 20px;
    flex: 1;
  }
  nav a {
    color: #f2f2f2;
    text-decoration: none;
    font-weight: 600;
    padding: 10px 15px;
    border-radius: 6px;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  nav a:hover, nav a:focus {
    background-color: #8B5E3C;
    color: white;
    outline: none;
  }
  nav a[aria-current="page"] {
    background-color: #8B5E3C;
    cursor: default;
  }
  .search-container {
    position: relative;
    margin-left: 20px;
    display: flex;
    align-items: center;
  }
  .search-container input {
    padding: 8px 12px;
    border-radius: 5px;
    border: 2px solid #8B5E3C;
    font-size: 1rem;
    width: 200px;
    background-color: #2b2b2b;
    color: #f2f2f2;
    outline: none;
    transition: border-color 0.3s ease;
  }
  .search-container input::placeholder {
    color: #bba88d;
  }
  .search-container input:focus {
    border-color: #c49e65;
    background-color: #3c3c3c;
  }

  main {
    margin-top: 90px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
    background: rgba(0,0,0,0.6);
    border-radius: 10px;
    padding: 20px;
    box-sizing: border-box;
    color: #e0e0e0;
    user-select: none;
  }

  #gameContainer {
    position: relative;
    margin-top: 20px;
    max-width: 320px;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
  }
  #gameCanvas {
    background: #555;
    border-radius: 10px;
    display: block;
    margin: 20px auto;
    touch-action: none;
    width: 300px;
    height: 500px;
  }
  
  /* Buttons play and mute */
  #playPauseBtn, #muteBtn {
    font-size: 1.2rem;
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    background: #8B5E3C;
    color: white;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
    display: inline-block;
    vertical-align: middle;
  }
  #playPauseBtn:hover, #muteBtn:hover {
    background: #b2854d;
  }
  #muteBtn {
    margin-left: 10px;
  }

  /* Score and arrow buttons container */
  #scoreControls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 10px;
    user-select: none;
    color: #c49e65;
    font-weight: bold;
    font-size: 1.2rem;
  }

  #scoreDisplay {
    display: flex;
    flex-direction: column;
    text-align: center;
    font-weight: bold;
  }

  #scoreDisplay #score, #scoreDisplay #highScore {
    font-size: 1.2rem;
  }
  #scoreDisplay #highScore {
    font-size: 1rem;
    color: #bba88d;
    font-weight: normal;
  }

  /* Arrow buttons */
  #leftBtn, #rightBtn {
    font-size: 1.5rem;
    padding: 6px 12px;
    border-radius: 8px;
    border: none;
    background: #8B5E3C;
    color: white;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
    min-width: 40px;
    height: 42px;
  }
  #leftBtn:active, #rightBtn:active {
    background: #b2854d;
  }

  /* Messages */
  #gameOverMessage, #levelUpMessage, #pauseOverlay {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    padding: 20px 40px;
    border-radius: 12px;
    font-size: 1.8rem;
    font-weight: bold;
    display: none;
    text-align: center;
    user-select: none;
    max-width: 90%;
  }
  #gameOverMessage {
    background: rgba(255,0,0,0.85);
  }
  #levelUpMessage {
    background: rgba(139,94,60,0.9);
    top: 35%;
    font-size: 2rem;
  }
  #pauseOverlay {
    background: rgba(0,0,0,0.85);
    font-size: 2rem;
  }

  /* Hide old mobile controls */
  #mobileControls {
    display: none !important;
  }
</style>
</head>
<body>

<header>
  <nav role="navigation" aria-label="Main Navigation">
    <a href="index.html" aria-current="page">Home</a>
    <a href="contact.html">Contact</a>
    <a href="about.html">About</a>
    <a href="about-cars.html">About Cars</a>
  </nav>

  <div class="search-container" role="search">
    <form onsubmit="return doSearch(event)">
      <input type="text" id="searchQuery" placeholder="Search the car or bike..." aria-label="Search the car or bike" />
    </form>
  </div>
</header>

<main>
  <h2>Welcome to Najeed's Car & Bike Info Website</h2>
  <p>Stay updated with the latest news, specifications, and reviews about cars and bikes. Play our simple car game below to enjoy some fun while you browse!</p>

  <div id="gameContainer" aria-live="polite" aria-label="Car game container">
    <div>
      <button id="playPauseBtn" aria-label="Play or pause the game">Play</button>
      <button id="muteBtn" aria-label="Mute or unmute sound">ðŸ”ˆ</button>
    </div>

    <canvas id="gameCanvas" width="300" height="500" aria-label="Simple car game"></canvas>

    <div id="scoreControls">
      <button id="leftBtn" aria-label="Move car left">â—€</button>
      <div id="scoreDisplay">
        <div id="score" aria-live="polite">Score: 0</div>
        <div id="highScore" aria-live="polite">High Score: 0</div>
      </div>
      <button id="rightBtn" aria-label="Move car right">â–¶</button>
    </div>

    <div id="gameOverMessage" role="alert">Game Over!<br>Click Retry to play again.</div>
    <div id="levelUpMessage" aria-live="polite">Level Up!</div>
    <div id="pauseOverlay" role="alert">Paused</div>
  </div>

</main>

<script>
  // Search function
  function doSearch(event){
    event.preventDefault();
    const query = document.getElementById('searchQuery').value.trim();
    if(query) {
      window.open('https://www.google.com/search?q=' + encodeURIComponent(query), '_blank');
    }
  }

  // Sounds
  const sounds = {
    leftRight: new Audio('https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg'),
    gameStart: new Audio('https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg'),
    gameOver: new Audio('https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg'),
    shieldOn: new Audio('https://actions.google.com/sounds/v1/cartoon/clang.ogg'),
    powerUp: new Audio('https://actions.google.com/sounds/v1/cartoon/pop.ogg'),
    backgroundMusic: new Audio('https://actions.google.com/sounds/v1/ambiences/traffic.ogg'),
    countdownBeep: new Audio('https://actions.google.com/sounds/v1/cartoon/clang.ogg'),
  };
  sounds.backgroundMusic.loop = true;

  let muted = false;
  function playSound(sound){
    if(!muted){
      sound.currentTime = 0;
      sound.play();
    }
  }

  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const lanesCount = 3;
  const laneWidth = canvas.width / lanesCount;
  const carWidth = 45;
  const carHeight = 75;
  const enemyWidth = 45;
  const enemyHeight = 75;
  const powerUpSize = 30;

  const lanesX = [
    laneWidth * 0.5 - carWidth / 2,
    laneWidth * 1.5 - carWidth / 2,
    laneWidth * 2.5 - carWidth / 2
  ];

  let currentLane = 1;
  let targetLane = 1;
  let carX = lanesX[currentLane];
  const carY = canvas.height - carHeight - 20;

  let enemyCars = [];
  let powerUps = [];
  let enemySpeed = 1.5;
  let enemySpawnRate = 0.008;
  let powerUpSpawnRate = 0.004;

  let score = 0;
  let scoreMultiplier = 1;
  let maxMultiplier = 3;
  let framesElapsed = 0;
  let isPlaying = false;
  let gameOverFlag = false;
  let paused = false;

  let shieldActive = false;
  let shieldTimer = 0;
  let speedBoostActive = false;
  let speedBoostTimer = 0;

  let wheelRotation = 0;
  let carBounce = 0;

  const playPauseBtn = document.getElementById('playPauseBtn');
  const muteBtn = document.getElementById('muteBtn');
  const scoreDisplay = document.getElementById('score');
  const highScoreDisplay = document.getElementById('highScore');
  const gameOverMessage = document.getElementById('gameOverMessage');
  const levelUpMessage = document.getElementById('levelUpMessage');
  const pauseOverlay = document.getElementById('pauseOverlay');
  const leftBtn = document.getElementById('leftBtn');
  const rightBtn = document.getElementById('rightBtn');

  // Load high score from localStorage
  let highScore = 0;
  try {
    const storedScore = localStorage.getItem('carGameHighScore');
    if(storedScore !== null){
      const parsed = parseInt(storedScore);
      if(!isNaN(parsed)) highScore = parsed;
    }
  } catch(e) {
    highScore = 0;
  }
  highScoreDisplay.textContent = `High Score: ${highScore}`;

  // Keyboard controls
  window.addEventListener('keydown', e => {
    if(e.key === 'ArrowLeft' || e.key.toLowerCase() === 'a'){
      moveLeft();
    } else if(e.key === 'ArrowRight' || e.key.toLowerCase() === 'd'){
      moveRight();
    } else if(e.key.toLowerCase() === 'p'){
      if(isPlaying) pauseGame();
      else startGame();
    } else if(e.key.toLowerCase() === 'm'){
      toggleMute();
    }
  });

  // Left/right functions
  function moveLeft(){
    if(targetLane > 0){
      targetLane--;
      playSound(sounds.leftRight);
      carBounce = 10;
    }
  }
  function moveRight(){
    if(targetLane < lanesCount - 1){
      targetLane++;
      playSound(sounds.leftRight);
      carBounce = 10;
    }
  }

  // Button click events
  leftBtn.addEventListener('click', moveLeft);
  rightBtn.addEventListener('click', moveRight);

  playPauseBtn.addEventListener('click', () => {
    if(gameOverFlag){
      resetGame();
      startGame();
    } else {
      if(isPlaying) pauseGame();
      else startGame();
    }
  });

  muteBtn.addEventListener('click', toggleMute);

  function toggleMute(){
    muted = !muted;
    muteBtn.textContent = muted ? 'ðŸ”‡' : 'ðŸ”ˆ';
    if(muted){
      sounds.backgroundMusic.pause();
    } else if(isPlaying){
      sounds.backgroundMusic.play();
    }
  }
  muteBtn.textContent = muted ? 'ðŸ”‡' : 'ðŸ”ˆ';

  // Road and game drawing functions (same as before)
  function drawRoad(){
    ctx.fillStyle = '#555';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.strokeStyle = 'white';
    ctx.lineWidth = 6;
    ctx.beginPath();
    ctx.moveTo(10, 0);
    ctx.lineTo(10, canvas.height);
    ctx.moveTo(canvas.width - 10, 0);
    ctx.lineTo(canvas.width - 10, canvas.height);
    ctx.stroke();

    ctx.strokeStyle = 'white';
    ctx.lineWidth = 4;
    ctx.setLineDash([30, 30]);
    for(let i=1; i<lanesCount; i++){
      const x = i * laneWidth;
      ctx.beginPath();
      ctx.moveTo(x, 0);
      ctx.lineTo(x, canvas.height);
      ctx.stroke();
    }
    ctx.setLineDash([]);
  }

  function drawCar() {
    const x = carX;
    const y = carY + (carBounce > 0 ? Math.sin(carBounce/2) * 5 : 0);

    const grad = ctx.createLinearGradient(x, y, x, y + carHeight);
    grad.addColorStop(0, '#d32f2f');
    grad.addColorStop(1, '#7b0000');
    ctx.fillStyle = grad;
    ctx.fillRect(x, y, carWidth, carHeight);

    ctx.fillStyle = '#87ceeb';
    ctx.fillRect(x + 10, y + 10, carWidth - 20, carHeight / 3);

    ctx.fillStyle = 'black';
    ctx.save();
    ctx.translate(x + 15, y + carHeight - 20);
    ctx.rotate(wheelRotation);
    ctx.beginPath();
    ctx.ellipse(0, 0, 8, 12, 0, 0, 2 * Math.PI);
    ctx.fill();
    ctx.restore();

    ctx.save();
    ctx.translate(x + carWidth - 15, y + carHeight - 20);
    ctx.rotate(wheelRotation);
    ctx.beginPath();
    ctx.ellipse(0, 0, 8, 12, 0, 0, 2 * Math.PI);
    ctx.fill();
    ctx.restore();

    if(shieldActive){
      ctx.strokeStyle = 'cyan';
      ctx.lineWidth = 5;
      ctx.beginPath();
      ctx.arc(x + carWidth/2, y + carHeight/2, carWidth, 0, 2*Math.PI);
      ctx.stroke();
    }
  }

  function drawEnemyCar(enemy) {
    const x = lanesX[enemy.lane];
    const y = enemy.y;

    const grad = ctx.createLinearGradient(x, y, x, y + enemyHeight);
    grad.addColorStop(0, '#1565c0');
    grad.addColorStop(1, '#0d3475');
    ctx.fillStyle = grad;
    ctx.fillRect(x, y, enemyWidth, enemyHeight);

    ctx.fillStyle = '#a2c9f9';
    ctx.fillRect(x + 10, y + 10, enemyWidth - 20, enemyHeight / 3);

    ctx.fillStyle = 'black';
    ctx.beginPath();
    ctx.ellipse(x + 15, y + enemyHeight - 20, 8, 12, 0, 0, 2 * Math.PI);
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(x + enemyWidth - 15, y + enemyHeight - 20, 8, 12, 0, 0, 2 * Math.PI);
    ctx.fill();
  }

  function drawPowerUp(powerUp){
    const x = lanesX[powerUp.lane] + (carWidth/2 - powerUpSize/2);
    const y = powerUp.y;

    ctx.fillStyle = powerUp.type === 'shield' ? 'cyan' : 'orange';
    ctx.beginPath();
    ctx.arc(x + powerUpSize/2, y + powerUpSize/2, powerUpSize/2, 0, 2*Math.PI);
    ctx.fill();

    ctx.fillStyle = 'white';
    ctx.font = '18px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(powerUp.type === 'shield' ? 'S' : 'B', x + powerUpSize/2, y + powerUpSize/2);
  }

  // Game Loop
  function gameLoop(){
    if(!isPlaying || paused) {
      requestAnimationFrame(gameLoop);
      return;
    }
    framesElapsed++;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawRoad();

    // Smooth lane switching
    const targetX = lanesX[targetLane];
    if(Math.abs(carX - targetX) > 5){
      carX += (targetX - carX) * 0.3;
    } else {
      carX = targetX;
      currentLane = targetLane;
    }

    // Update enemies
    for(let i = enemyCars.length -1; i >=0; i--){
      enemyCars[i].y += enemySpeed * (speedBoostActive ? 2 : 1);
      if(enemyCars[i].y > canvas.height){
        enemyCars.splice(i,1);
        score += scoreMultiplier;
        if(scoreMultiplier < maxMultiplier && score % 20 === 0){
          scoreMultiplier++;
          showLevelUp();
          enemySpeed += 0.3;
          enemySpawnRate += 0.001;
          playSound(sounds.powerUp);
        }
        updateScore();
      }
    }

    // Update power-ups
    for(let i = powerUps.length -1; i >= 0; i--){
      powerUps[i].y += enemySpeed;
      if(powerUps[i].y > canvas.height){
        powerUps.splice(i, 1);
      }
    }

    // Spawn enemy cars
    if(Math.random() < enemySpawnRate){
      enemyCars.push({lane: Math.floor(Math.random() * lanesCount), y: -enemyHeight});
    }

    // Spawn power-ups
    if(Math.random() < powerUpSpawnRate){
      const type = Math.random() < 0.5 ? 'shield' : 'boost';
      powerUps.push({lane: Math.floor(Math.random() * lanesCount), y: -powerUpSize, type: type});
    }

    // Draw enemies
    enemyCars.forEach(drawEnemyCar);

    // Draw power-ups
    powerUps.forEach(drawPowerUp);

    // Draw player car
    drawCar();

    // Update wheel rotation & bounce
    wheelRotation += 0.2 * (speedBoostActive ? 2 : 1);
    carBounce = Math.max(0, carBounce - 1);

    // Check collisions
    if(checkCollisions()){
      endGame();
      return;
    }

    // Update shield/speed timers
    if(shieldActive){
      shieldTimer--;
      if(shieldTimer <= 0){
        shieldActive = false;
      }
    }
    if(speedBoostActive){
      speedBoostTimer--;
      if(speedBoostTimer <= 0){
        speedBoostActive = false;
      }
    }

    // Handle pause overlay
    pauseOverlay.style.display = paused ? 'block' : 'none';

    requestAnimationFrame(gameLoop);
  }

  // Collision check
  function checkCollisions(){
    // Check enemy collision
    for(let enemy of enemyCars){
      if(enemy.lane === currentLane){
        if(enemy.y + enemyHeight > carY && enemy.y < carY + carHeight){
          if(shieldActive){
            shieldActive = false;
            shieldTimer = 0;
            enemyCars = enemyCars.filter(e => e !== enemy);
            playSound(sounds.shieldOn);
            return false;
          } else {
            return true; // Collision detected
          }
        }
      }
    }
    // Check powerup collision
    for(let i = powerUps.length -1; i >= 0; i--){
      const p = powerUps[i];
      if(p.lane === currentLane){
        if(p.y + powerUpSize > carY && p.y < carY + carHeight){
          if(p.type === 'shield'){
            shieldActive = true;
            shieldTimer = 600; // 10 seconds at 60fps
          } else if(p.type === 'boost'){
            speedBoostActive = true;
            speedBoostTimer = 600;
          }
          powerUps.splice(i, 1);
          playSound(sounds.powerUp);
          break;
        }
      }
    }
    return false;
  }

  // Show level up message
  let levelUpTimeout;
  function showLevelUp(){
    clearTimeout(levelUpTimeout);
    levelUpMessage.style.display = 'block';
    levelUpTimeout = setTimeout(() => {
      levelUpMessage.style.display = 'none';
    }, 2000);
  }

  // Update score display
  function updateScore(){
    scoreDisplay.textContent = `Score: ${score}`;
    if(score > highScore){
      highScore = score;
      localStorage.setItem('carGameHighScore', highScore);
      highScoreDisplay.textContent = `High Score: ${highScore}`;
    }
  }

  // Reset game variables
  function resetGame(){
    enemyCars = [];
    powerUps = [];
    score = 0;
    scoreMultiplier = 1;
    enemySpeed = 1.5;
    enemySpawnRate = 0.008;
    shieldActive = false;
    shieldTimer = 0;
    speedBoostActive = false;
    speedBoostTimer = 0;
    currentLane = 1;
    targetLane = 1;
    carX = lanesX[currentLane];
    gameOverFlag = false;
    paused = false;
    updateScore();
    gameOverMessage.style.display = 'none';
    pauseOverlay.style.display = 'none';
  }

  // Start game
  function startGame(){
    if(gameOverFlag){
      resetGame();
    }
    isPlaying = true;
    playPauseBtn.textContent = 'Pause';
    playSound(sounds.gameStart);
    sounds.backgroundMusic.play();
    pauseOverlay.style.display = 'none';
    requestAnimationFrame(gameLoop);
  }

  // Pause game
  function pauseGame(){
    if(!isPlaying) return;
    isPlaying = false;
    paused = true;
    playPauseBtn.textContent = 'Play';
    sounds.backgroundMusic.pause();
    pauseOverlay.style.display = 'block';
  }

  // End game
  function endGame(){
    gameOverFlag = true;
    isPlaying = false;
    playPauseBtn.textContent = 'Retry';
    gameOverMessage.style.display = 'block';
    sounds.backgroundMusic.pause();
    playSound(sounds.gameOver);
  }

  // Initial draw to show road and car
  drawRoad();
  drawCar();

</script>

</body>
</html>
